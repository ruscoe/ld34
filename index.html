<!DOCTYPE HTML>
<html>

<head>
  <title>Ludum Dare 34</title>
  <script src="lib/pixi.min.js"></script>
</head>

<body>
  <script>
    var background = 0xF1F1F1;
    var renderer = PIXI.autoDetectRenderer(512, 512, {
      backgroundColor: background
    });
    var stage = new PIXI.Container();
    var graphics = new PIXI.Graphics();

    var centerX = (renderer.width / 2);
    var centerY = (renderer.height / 2);

    var innerCircleRadius, innerCircleMaxRadius, outerCircles;
    var innerCircleMinRadius = 1;
    var outerCircleRadius = 20;

    var circleColors = [0xFF0000, 0x00FF00, 0x0000FF, 0x0FABA2];
    var circlePositions = [{
      x: centerX,
      y: centerY - (renderer.height / 4)
    }, {
      x: centerX + (renderer.width / 4),
      y: centerY
    }, {
      x: centerX,
      y: centerY + (renderer.height / 4)
    }, {
      x: centerX - (renderer.width / 4),
      y: centerY
    }]

    innerCircleColor = getRandomCircleColor();
    innerCircleRadius = innerCircleMaxRadius = 60;

    document.body.appendChild(renderer.view);

    stage.addChild(graphics);

    update();

    function update() {
      requestAnimationFrame(update);

      if (innerCircleRadius > innerCircleMinRadius) {
        graphics.beginFill(background);
        graphics.drawCircle(centerX, centerY, innerCircleRadius);
        graphics.endFill();

        innerCircleRadius -= 0.5;

        graphics.beginFill(innerCircleColor);
        graphics.drawCircle(centerX, centerY, innerCircleRadius);
        graphics.endFill();
      }

      drawOuterCircles();

      renderer.render(stage);
    }

    function drawOuterCircles() {
      createOuterCircles();

      for (var i = 0; i < outerCircles.length; i++) {
        graphics.beginFill(outerCircles[i].color);
        graphics.drawCircle(outerCircles[i].position.x, outerCircles[i].position.y, outerCircleRadius);
        graphics.endFill();
      }
    }

    function createOuterCircles() {
      outerCircles = [];

      for (var i = 0; i < circleColors.length; i++) {
        outerCircles.push({
          color: circleColors[i],
          position: circlePositions[i]
        });
      }
    }

    function getRandomCircleColor() {
      return (circleColors[Math.floor(Math.random() * circleColors.length)]);
    }
  </script>
</body>

</html>
